{
  "componentTests": [
    {
      "testName": "Add and edit formula for a new attribute",
      "steps": [
        {
          "name": "visitURL",
          "queryParams": "?sample=four&dashboard"
        },
        {
          "name": "addNewAttribute"
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "newAttr",
          "newAttributeName": "Formula"
        },
        {
          "name": "addFormula",
          "attributeName": "Formula",
          "formula": "a+1"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula",
          "values": [2,3,4,4,1]
        },
        {
          "name": "checkFormulaExists",
          "attributeName": "Formula",
          "formula": "a+1"
        },
        {
          "name": "editFormula",
          "attributeName": "Formula",
          "formula": "a+2"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula",
          "values": [3,4,5,5,2]
        }
      ]
    },
    {
      "testName": "Add and edit formula for an existng attribute",
      "steps": [
        {
          "name": "visitURL",
          "queryParams": "?sample=four&dashboard"
        },
        {
          "name": "addFormula",
          "attributeName": "b",
          "formula": "count(a)"
        },
        {
          "name": "verifyValues",
          "attributeName": "b",
          "values": [4,4,4,4,4]
        },
        {
          "name": "checkFormulaExists",
          "attributeName": "b",
          "formula": "count(a)"
        },
        {
          "name": "editFormula",
          "attributeName": "b",
          "formula": "mean(a)"
        },
        {
          "name": "verifyValues",
          "attributeName": "b",
          "values": [2.25,2.25,2.25,2.25,2.25]
        }
      ]
    },
    {
      "testName": "Rename attribute and make sure formula updates",
      "steps": [
        {
          "name": "visitURL",
          "queryParams": "?sample=four&dashboard"
        },
        {
          "name": "addNewAttribute"
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "newAttr",
          "newAttributeName": "Formula"
        },
        {
          "name": "addFormula",
          "attributeName": "Formula",
          "formula": "count(a)"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula",
          "values": [4,4,4,4,4]
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "a",
          "newAttributeName": "x"
        },
        {
          "name": "checkFormulaExists",
          "attributeName": "Formula",
          "formula": "count(x)"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula",
          "values": [4,4,4,4,4]
        },
        {
          "name": "editFormula",
          "attributeName": "Formula",
          "formula": "mean(x)"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula",
          "values": [2.25,2.25,2.25,2.25,2.25]
        }
      ]
    },
    {
      "testName": "Delete attribute that a formula uses",
      "steps": [
        {
          "name": "visitURL",
          "queryParams": "?sample=four&dashboard"
        },
        {
          "name": "addFormula",
          "attributeName": "b",
          "formula": "count(a)"
        },
        {
          "name": "deleteAttribute",
          "attributeName": "a"
        },
        {
          "name": "checkFormulaExists",
          "attributeName": "b",
          "formula": "count(a)"
        },
        {
          "name": "verifyValues",
          "attributeName": "b",
          "values": [
            "❌ Undefined symbol a",
            "❌ Undefined symbol a",
            "❌ Undefined symbol a",
            "❌ Undefined symbol a",
            "❌ Undefined symbol a"
          ]
        },
        {
          "name": "editFormula",
          "attributeName": "b",
          "formula": "5"
        },
        {
          "name": "verifyValues",
          "attributeName": "b",
          "values": [5,5,5,5,5]
        }
      ]
    },
    {
      "testName": "Use slider variable with formula",
      "steps": [
        {
          "name": "visitURL",
          "queryParams": "?sample=four&dashboard"
        },
        {
          "name": "addFormula",
          "attributeName": "b",
          "formula": "count(a) + v1"
        },
        {
          "name": "verifyValues",
          "attributeName": "b",
          "values": [4.5,4.5,4.5,4.5,4.5]
        },
        {
          "name": "changeSliderVariableName",
          "sliderVariableName": "v2"
        },
        {
          "name": "checkFormulaExists",
          "attributeName": "b",
          "formula": "count(a) + v2"
        },
        {
          "name": "verifyValues",
          "attributeName": "b",
          "values": [4.5,4.5,4.5,4.5,4.5]
        },
        {
          "name": "changeSliderValue",
          "sliderValue": "10"
        },
        {
          "name": "checkFormulaExists",
          "attributeName": "b",
          "formula": "count(a) + v2"
        },
        {
          "name": "verifyValues",
          "attributeName": "b",
          "values": [14,14,14,14,14]
        },
        {
          "name": "deleteSlider"
        },
        {
          "name": "checkFormulaExists",
          "attributeName": "b",
          "formula": "count(a) + v2"
        }
      ]
    },
    {
      "testName": "Formula in a new dataset",
      "steps": [
        {
          "name": "visitURL",
          "queryParams": ""
        },
        {
          "name": "createNewDataset"
        },
        {
          "name": "insertCases",
          "rowIndex": 2,
          "numOfCases": 4
        },
        {
          "name": "addFormula",
          "attributeName": "AttributeName",
          "formula": "10*10"
        },
        {
          "name": "verifyValues",
          "attributeName": "AttributeName",
          "values": [100,100,100,100,100]
        },
        {
          "name": "addNewAttribute"
        },
        {
          "name": "addFormula",
          "attributeName": "newAttr",
          "formula": "AttributeName+2"
        },
        {
          "name": "verifyValues",
          "attributeName": "newAttr",
          "values": [102,102,102,102,102]
        }
      ]
    }
  ],
  "hierarchicalTests": [
    {
      "testName": "Check aggregate and non-aggregate formulae referencing a parent attribute in child collection",
      "steps": [
        {
          "name": "visitURL",
          "queryParams": ""
        },
        {
          "name": "importFile",
          "file": "cypress/fixtures/hierarchical-four.codap3"
        },
        {
          "name": "addNewAttribute",
          "collectionIndex": "2"
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "newAttr",
          "newAttributeName": "Formula",
          "collectionIndex": "2"
        },
        {
          "name": "addFormula",
          "attributeName": "Formula",
          "formula": "count(b)",
          "collectionIndex": "2"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula",
          "values": [
            "❌ invalid reference to parent attribute 'b' within aggregate function",
            "❌ invalid reference to parent attribute 'b' within aggregate function",
            "❌ invalid reference to parent attribute 'b' within aggregate function",
            "❌ invalid reference to parent attribute 'b' within aggregate function",
            "❌ invalid reference to parent attribute 'b' within aggregate function"
          ],
          "collectionIndex": "2"
        },
        {
          "name": "editFormula",
          "attributeName": "Formula",
          "formula": "b+1",
          "collectionIndex": "2"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula",
          "values": [2,2,2,1,1],
          "collectionIndex": "2"
        }
      ]
    },
    {
      "testName": "Check aggregate and non-aggregate formulae referencing a child attribute in child collection",
      "steps": [
        {
          "name": "visitURL",
          "queryParams": ""
        },
        {
          "name": "importFile",
          "file": "cypress/fixtures/hierarchical-four.codap3"
        },
        {
          "name": "addNewAttribute",
          "collectionIndex": "2"
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "newAttr",
          "newAttributeName": "Formula",
          "collectionIndex": "2"
        },
        {
          "name": "addFormula",
          "attributeName": "Formula",
          "formula": "count(a)",
          "collectionIndex": "2"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula",
          "values": [3,3,3,1,1],
          "collectionIndex": "2"
        },
        {
          "name": "editFormula",
          "attributeName": "Formula",
          "formula": "a+1",
          "collectionIndex": "2"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula",
          "values": [2,3,4,4,1],
          "collectionIndex": "2"
        }
      ]
    },
    {
      "testName": "Check aggregate and non-aggregate formulae referencing a parent attribute in parent collection",
      "steps": [
        {
          "name": "visitURL",
          "queryParams": ""
        },
        {
          "name": "importFile",
          "file": "cypress/fixtures/hierarchical-four.codap3"
        },
        {
          "name": "addNewAttribute",
          "collectionIndex": "1"
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "newAttr",
          "newAttributeName": "Formula",
          "collectionIndex": "1"
        },
        {
          "name": "addFormula",
          "attributeName": "Formula",
          "formula": "count(b)",
          "collectionIndex": "1"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula",
          "values": [1,1],
          "collectionIndex": "1"
        },
        {
          "name": "editFormula",
          "attributeName": "Formula",
          "formula": "b+1",
          "collectionIndex": "1"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula",
          "values": [2,1],
          "collectionIndex": "1"
        }
      ]
    },
    {
      "testName": "Check aggregate and non-aggregate formulae referencing a child attribute in parent collection",
      "steps": [
        {
          "name": "visitURL",
          "queryParams": ""
        },
        {
          "name": "importFile",
          "file": "cypress/fixtures/hierarchical-four.codap3"
        },
        {
          "name": "addNewAttribute",
          "collectionIndex": "1"
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "newAttr",
          "newAttributeName": "Formula",
          "collectionIndex": "1"
        },
        {
          "name": "addFormula",
          "attributeName": "Formula",
          "formula": "a+1",
          "collectionIndex": "1"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula",
          "values": [
            "❌ invalid reference to child attribute 'a'",
            "❌ invalid reference to child attribute 'a'"
          ],
          "collectionIndex": "1"
        },
        {
          "name": "editFormula",
          "attributeName": "Formula",
          "formula": "count(a)",
          "collectionIndex": "1"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula",
          "values": [3,1],
          "collectionIndex": "1"
        }
      ]
    }
  ],
  "errorTests": [
    {
      "testName": "Check invalid functions",
      "steps": [
        {
          "name": "visitURL",
          "queryParams": "?sample=four&dashboard"
        },
        {
          "name": "addNewAttribute"
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "newAttr",
          "newAttributeName": "Formula"
        },
        {
          "name": "addFormula",
          "attributeName": "Formula",
          "formula": "count(aaa)"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula",
          "values": [
            "❌ Undefined symbol aaa",
            "❌ Undefined symbol aaa",
            "❌ Undefined symbol aaa",
            "❌ Undefined symbol aaa",
            "❌ Undefined symbol aaa"
          ]
        },
        {
          "name": "editFormula",
          "attributeName": "Formula",
          "formula": "c(aaa)"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula",
          "values": [
            "❌ Undefined function c",
            "❌ Undefined function c",
            "❌ Undefined function c",
            "❌ Undefined function c",
            "❌ Undefined function c"
          ]
        },
        {
          "name": "editFormula",
          "attributeName": "Formula",
          "formula": "count(a"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula",
          "values": [
            "❌ Syntax error: 'Parenthesis ) expected (char 8)'",
            "❌ Syntax error: 'Parenthesis ) expected (char 8)'",
            "❌ Syntax error: 'Parenthesis ) expected (char 8)'",
            "❌ Syntax error: 'Parenthesis ) expected (char 8)'",
            "❌ Syntax error: 'Parenthesis ) expected (char 8)'"
          ]
        },
        {
          "name": "editFormula",
          "attributeName": "Formula",
          "formula": "count(a)"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula",
          "values": [4,4,4,4,4]
        }
      ]
    }
  ],
  "specialChararcterTests": [
    {
      "testName": "Check backtick in symbol name",
      "steps": [
        {
          "name": "visitURL",
          "queryParams": "?sample=four"
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "b",
          "newAttributeName": "x`yz"
        },
        {
          "name": "addNewAttribute"
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "newAttr",
          "newAttributeName": "Formula1"
        },
        {
          "name": "addFormula",
          "attributeName": "Formula1",
          "formula": "`x\\`yz`+1"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula1",
          "values": [2,2,2,1,1]
        },
        {
          "name": "addNewAttribute"
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "newAttr",
          "newAttributeName": "Formula2"
        },
        {
          "name": "addFormula",
          "attributeName": "Formula2",
          "formula": "Formula1+1"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula2",
          "values": [3,3,3,2,2]
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "Formula1",
          "newAttributeName": "Formula`1"
        },
        {
          "name": "checkFormulaExists",
          "attributeName": "Formula2",
          "formula": "`Formula\\`1`+1"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula2",
          "values": [3,3,3,2,2]
        }
      ]
    },
    {
      "testName": "Check backslash symbol in attribute",
      "steps": [
        {
          "name": "visitURL",
          "queryParams": "?sample=four"
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "b",
          "newAttributeName": "x\\yz"
        },
        {
          "name": "addNewAttribute"
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "newAttr",
          "newAttributeName": "Formula1"
        },
        {
          "name": "addFormula",
          "attributeName": "Formula1",
          "formula": "`x\\yz`+1"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula1",
          "values": [2,2,2,1,1]
        },
        {
          "name": "addNewAttribute"
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "newAttr",
          "newAttributeName": "Formula2"
        },
        {
          "name": "addFormula",
          "attributeName": "Formula2",
          "formula": "Formula1+1"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula2",
          "values": [3,3,3,2,2]
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "Formula1",
          "newAttributeName": "Formula\\1"
        },
        {
          "name": "checkFormulaExists",
          "attributeName": "Formula2",
          "formula": "`Formula\\\\1`+1"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula2",
          "values": [3,3,3,2,2]
        }
      ]
    },
    {
      "testName": "Check backslash and backtick symbols in attribute",
      "steps": [
        {
          "name": "visitURL",
          "queryParams": "?sample=four"
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "b",
          "newAttributeName": "x\\`yz"
        },
        {
          "name": "addNewAttribute"
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "newAttr",
          "newAttributeName": "Formula1"
        },
        {
          "name": "addFormula",
          "attributeName": "Formula1",
          "formula": "`x\\\\\\`yz`+1"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula1",
          "values": [2,2,2,1,1]
        },
        {
          "name": "addNewAttribute"
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "newAttr",
          "newAttributeName": "Formula2"
        },
        {
          "name": "addFormula",
          "attributeName": "Formula2",
          "formula": "Formula1+1"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula2",
          "values": [3,3,3,2,2]
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "Formula1",
          "newAttributeName": "Formula\\`1"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula2",
          "values": [3,3,3,2,2]
        }
      ]
    },
    {
      "testName": "Check single quote symbol in attribute",
      "steps": [
        {
          "name": "visitURL",
          "queryParams": "?sample=four"
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "b",
          "newAttributeName": "x'yz"
        },
        {
          "name": "addNewAttribute"
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "newAttr",
          "newAttributeName": "Formula1"
        },
        {
          "name": "addFormula",
          "attributeName": "Formula1",
          "formula": "`x'yz`+1"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula1",
          "values": [2,2,2,1,1]
        },
        {
          "name": "addNewAttribute"
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "newAttr",
          "newAttributeName": "Formula2"
        },
        {
          "name": "addFormula",
          "attributeName": "Formula2",
          "formula": "Formula1+1"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula2",
          "values": [3,3,3,2,2]
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "Formula1",
          "newAttributeName": "Formula'1"
        },
        {
          "name": "checkFormulaExists",
          "attributeName": "Formula2",
          "formula": "`Formula'1`+1"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula2",
          "values": [3,3,3,2,2]
        }
      ]
    },
    {
      "testName": "Check double quotes symbol in attribute",
      "steps": [
        {
          "name": "visitURL",
          "queryParams": "?sample=four"
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "b",
          "newAttributeName": "x\"yz"
        },
        {
          "name": "addNewAttribute"
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "newAttr",
          "newAttributeName": "Formula1"
        },
        {
          "name": "addFormula",
          "attributeName": "Formula1",
          "formula": "`x\"yz`+1"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula1",
          "values": [2,2,2,1,1]
        },
        {
          "name": "addNewAttribute"
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "newAttr",
          "newAttributeName": "Formula2"
        },
        {
          "name": "addFormula",
          "attributeName": "Formula2",
          "formula": "Formula1+1"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula2",
          "values": [3,3,3,2,2]
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "Formula1",
          "newAttributeName": "Formula\"1"
        },
        {
          "name": "checkFormulaExists",
          "attributeName": "Formula2",
          "formula": "`Formula\"1`+1"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula2",
          "values": [3,3,3,2,2]
        }
      ]
    },
    {
      "testName": "Check backslash and double quotes symbols in attribute",
      "steps": [
        {
          "name": "visitURL",
          "queryParams": "?sample=four"
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "b",
          "newAttributeName": "x\\\"yz"
        },
        {
          "name": "addNewAttribute"
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "newAttr",
          "newAttributeName": "Formula1"
        },
        {
          "name": "addFormula",
          "attributeName": "Formula1",
          "formula": "`x\\\"yz`+1"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula1",
          "values": [2,2,2,1,1]
        },
        {
          "name": "addNewAttribute"
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "newAttr",
          "newAttributeName": "Formula2"
        },
        {
          "name": "addFormula",
          "attributeName": "Formula2",
          "formula": "Formula1+1"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula2",
          "values": [3,3,3,2,2]
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "Formula1",
          "newAttributeName": "Formula\\\"1"
        },
        {
          "name": "checkFormulaExists",
          "attributeName": "Formula2",
          "formula": "`Formula\\\\\"1`+1"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula2",
          "values": [3,3,3,2,2]
        }
      ]
    },
    {
      "testName": "Check double quote in string constant",
      "steps": [
        {
          "name": "visitURL",
          "queryParams": "?sample=four"
        },
        {
          "name": "addNewAttribute"
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "newAttr",
          "newAttributeName": "Formula"
        },
        {
          "name": "addFormula",
          "attributeName": "Formula",
          "formula": "if(b = 1, \"o\\\"k\", \"ok\")"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula",
          "values": ["o\"k","o\"k","o\"k","ok","ok"]
        },
        {
          "name": "editFormula",
          "attributeName": "Formula",
          "formula": "if(b = 1, \"o\\\\k\", \"ok\")"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula",
          "values": ["o\\k","o\\k","o\\k","ok","ok"]
        },
        {
          "name": "editFormula",
          "attributeName": "Formula",
          "formula": "if(b = 1, \"o\\\\\\\"k\", \"ok\")"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula",
          "values": ["o\\\"k","o\\\"k","o\\\"k","ok","ok"]
        }
      ]
    },
    {
      "testName": "Check double quote in symbol name",
      "steps": [
        {
          "name": "visitURL",
          "queryParams": "?sample=four"
        },
        {
          "name": "addNewAttribute"
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "newAttr",
          "newAttributeName": "Formula"
        },
        {
          "name": "addFormula",
          "attributeName": "Formula",
          "formula": "lookupByIndex(\"Four\", \"b\", caseIndex)"
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "b",
          "newAttributeName": "x'yz"
        },
        {
          "name": "checkFormulaExists",
          "attributeName": "Formula",
          "formula": "lookupByIndex(\"Four\", \"x'yz\", caseIndex)"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula",
          "values": [1,1,1,"",""]
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "x'yz",
          "newAttributeName": "x\"yz"
        },
        {
          "name": "checkFormulaExists",
          "attributeName": "Formula",
          "formula": "lookupByIndex(\"Four\", \"x\\\"yz\", caseIndex)"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula",
          "values": [1,1,1,"",""]
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "x\\\"yz",
          "newAttributeName": "x\\yz"
        },
        {
          "name": "checkFormulaExists",
          "attributeName": "Formula",
          "formula": "lookupByIndex(\"Four\", \"x\\\\yz\", caseIndex)"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula",
          "values": [1,1,1,"",""]
        }
      ]
    },
    {
      "testName": "Check single quote in string constant",
      "steps": [
        {
          "name": "visitURL",
          "queryParams": "?sample=four"
        },
        {
          "name": "addNewAttribute"
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "newAttr",
          "newAttributeName": "Formula"
        },
        {
          "name": "addFormula",
          "attributeName": "Formula",
          "formula": "if(b = 1, 'ok', 'not ok')"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula",
          "values": ["ok","ok","ok","not ok","not ok"]
        },
        {
          "name": "editFormula",
          "attributeName": "Formula",
          "formula": "if(b = 1, 'o\"k', 'not ok')"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula",
          "values": ["o\"k","o\"k","o\"k","not ok","not ok"]
        },
        {
          "name": "editFormula",
          "attributeName": "Formula",
          "formula": "if(b = 1, 'o\\'k', 'not ok')"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula",
          "values": ["o'k","o'k","o'k","not ok","not ok"]
        },
        {
          "name": "editFormula",
          "attributeName": "Formula",
          "formula": "if(b = 1, 'o\\\\k', 'not ok')"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula",
          "values": ["o\\k","o\\k","o\\k","not ok","not ok"]
        }
      ]
    },
    {
      "testName": "Check single quote in symbol name",
      "steps": [
        {
          "name": "visitURL",
          "queryParams": "?sample=four"
        },
        {
          "name": "addNewAttribute"
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "newAttr",
          "newAttributeName": "Formula"
        },
        {
          "name": "addFormula",
          "attributeName": "Formula",
          "formula": "lookupByIndex('Four', 'b', caseIndex)"
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "b",
          "newAttributeName": "x'yz"
        },
        {
          "name": "checkFormulaExists",
          "attributeName": "Formula",
          "formula": "lookupByIndex('Four', 'x\\'yz', caseIndex)"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula",
          "values": [1,1,1,"",""]
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "x'yz",
          "newAttributeName": "x\"yz"
        },
        {
          "name": "checkFormulaExists",
          "attributeName": "Formula",
          "formula": "lookupByIndex('Four', 'x\"yz', caseIndex)"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula",
          "values": [1,1,1,"",""]
        },
        {
          "name": "renameAttribute",
          "currentAttributeName": "x\\\"yz",
          "newAttributeName": "x\\yz"
        },
        {
          "name": "checkFormulaExists",
          "attributeName": "Formula",
          "formula": "lookupByIndex('Four', 'x\\\\yz', caseIndex)"
        },
        {
          "name": "verifyValues",
          "attributeName": "Formula",
          "values": [1,1,1,"",""]
        }
      ]
    }
  ]
}
